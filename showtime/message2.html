<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8" />
</head>

<body>
    <h1 class="header">page B</h1>

    <input type="text" id="inp" value="我想你">
    <button id="btn">send</button>

</body>


<script>
    var addEvent = function (elem, type, handler) {
        if (window.addEventListener) {
            addEvent = function (elem, type, handler) {
                elem.addEventListener(type, handler, false);
            };
        } else if (window.attachEvent) {
            addEvent = function (elem, type, handler) {
                elem.attachEvent('on' + type, handler);
            };
        }

        return addEvent(elem, type, handler);
    };
    addEvent(window, 'message', function (ev) {
        // if (ev.source !== window.parent) {return;}
        var data = ev.data;
        document.body.style.background = 'red';
        console.log('222get',data)
    });

    document.getElementById('btn').onclick = function () {
        var data = document.querySelector('#inp').value;
        parent.postMessage(data, 'http://127.0.0.1:5500/'); // 若父页面的域名和指定的不一致，则postMessage失败
        // parent.postMessage(data, '*'); // 触发父页面的message事件
    }
</script>